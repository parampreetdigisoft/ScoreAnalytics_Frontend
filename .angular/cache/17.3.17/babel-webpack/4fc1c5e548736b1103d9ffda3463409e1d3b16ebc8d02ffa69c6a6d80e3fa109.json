{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction LoginComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \" Please enter a valid email address \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \" Password is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(fb, authService, router) {\n      this.fb = fb;\n      this.authService = authService;\n      this.router = router;\n      this.isLoading = false;\n      this.errorMessage = '';\n      this.loginForm = this.fb.group({\n        email: ['', [Validators.required, Validators.email]],\n        password: ['', [Validators.required, Validators.minLength(6)]]\n      });\n    }\n    ngOnInit() {\n      // Redirect if already authenticated\n      if (this.authService.isAuthenticated()) {\n        this.redirectBasedOnRole();\n      }\n    }\n    onSubmit() {\n      if (this.loginForm.valid) {\n        this.isLoading = true;\n        this.errorMessage = '';\n        this.authService.login(this.loginForm.value).subscribe({\n          next: response => {\n            this.isLoading = false;\n            this.redirectBasedOnRole();\n          },\n          error: error => {\n            this.isLoading = false;\n            this.errorMessage = error.error?.message || 'Login failed. Please try again.';\n          }\n        });\n      }\n    }\n    loginAsDemo(role) {\n      const demoCredentials = {\n        admin: {\n          email: 'admin@usvi.com',\n          password: 'password'\n        },\n        analyst: {\n          email: 'analyst@usvi.com',\n          password: 'password'\n        },\n        evaluator: {\n          email: 'evaluator@usvi.com',\n          password: 'password'\n        },\n        'city-user': {\n          email: 'cityuser@usvi.com',\n          password: 'password'\n        }\n      };\n      const credentials = demoCredentials[role];\n      this.loginForm.patchValue(credentials);\n      this.onSubmit();\n    }\n    redirectBasedOnRole() {\n      const role = this.authService.getUserRole();\n      switch (role) {\n        case 'admin':\n          this.router.navigate(['/admin']);\n          break;\n        case 'analyst':\n          this.router.navigate(['/analyst']);\n          break;\n        case 'evaluator':\n          this.router.navigate(['/evaluator']);\n          break;\n        case 'city-user':\n          this.router.navigate(['/city-user']);\n          break;\n        default:\n          this.router.navigate(['/home']);\n      }\n    }\n    isFieldInvalid(fieldName) {\n      const field = this.loginForm.get(fieldName);\n      return !!(field && field.invalid && (field.dirty || field.touched));\n    }\n    static {\n      this.ɵfac = function LoginComponent_Factory(t) {\n        return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginComponent,\n        selectors: [[\"app-login\"]],\n        decls: 38,\n        vars: 10,\n        consts: [[1, \"login-container\"], [1, \"login-card\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"Enter your email\", 1, \"form-control\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"Enter your password\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"demo-accounts\"], [1, \"demo-account\", 3, \"click\"], [1, \"error-message\"]],\n        template: function LoginComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n            i0.ɵɵtext(3, \"Login to USVI App\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"form\", 2);\n            i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(5, \"div\", 3)(6, \"label\", 4);\n            i0.ɵɵtext(7, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(8, \"input\", 5);\n            i0.ɵɵtemplate(9, LoginComponent_div_9_Template, 2, 0, \"div\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"div\", 3)(11, \"label\", 7);\n            i0.ɵɵtext(12, \"Password\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(13, \"input\", 8);\n            i0.ɵɵtemplate(14, LoginComponent_div_14_Template, 2, 0, \"div\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"div\", 3)(16, \"button\", 9);\n            i0.ɵɵtext(17);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(18, LoginComponent_div_18_Template, 2, 1, \"div\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"div\", 10)(20, \"h4\");\n            i0.ɵɵtext(21, \"Demo Accounts:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"div\", 11);\n            i0.ɵɵlistener(\"click\", function LoginComponent_Template_div_click_22_listener() {\n              return ctx.loginAsDemo(\"admin\");\n            });\n            i0.ɵɵelementStart(23, \"strong\");\n            i0.ɵɵtext(24, \"Admin:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(25, \" admin@usvi.com / password \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"div\", 11);\n            i0.ɵɵlistener(\"click\", function LoginComponent_Template_div_click_26_listener() {\n              return ctx.loginAsDemo(\"analyst\");\n            });\n            i0.ɵɵelementStart(27, \"strong\");\n            i0.ɵɵtext(28, \"Analyst:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(29, \" analyst@usvi.com / password \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"div\", 11);\n            i0.ɵɵlistener(\"click\", function LoginComponent_Template_div_click_30_listener() {\n              return ctx.loginAsDemo(\"evaluator\");\n            });\n            i0.ɵɵelementStart(31, \"strong\");\n            i0.ɵɵtext(32, \"Evaluator:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(33, \" evaluator@usvi.com / password \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"div\", 11);\n            i0.ɵɵlistener(\"click\", function LoginComponent_Template_div_click_34_listener() {\n              return ctx.loginAsDemo(\"city-user\");\n            });\n            i0.ɵɵelementStart(35, \"strong\");\n            i0.ɵɵtext(36, \"City User:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(37, \" cityuser@usvi.com / password \");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"error\", ctx.isFieldInvalid(\"email\"));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isFieldInvalid(\"email\"));\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"error\", ctx.isFieldInvalid(\"password\"));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isFieldInvalid(\"password\"));\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.loginForm.invalid || ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isLoading ? \"Logging in...\" : \"Login\", \" \");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          }\n        },\n        dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        styles: [\".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 10px 30px #0003;width:100%;max-width:400px}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e1e5e9;border-radius:5px;font-size:1rem;transition:border-color .3s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-control.error[_ngcontent-%COMP%]{border-color:#e74c3c}.btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:none;border-radius:5px;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s ease}.btn-primary[_ngcontent-%COMP%]{background-color:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#5a6fd8}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#bdc3c7;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.875rem;margin-top:.25rem}.demo-accounts[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1rem;border-top:1px solid #e1e5e9}.demo-accounts[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem;color:#666;font-size:.9rem}.demo-account[_ngcontent-%COMP%]{padding:.5rem;margin-bottom:.5rem;background-color:#f8f9fa;border-radius:5px;cursor:pointer;font-size:.875rem;transition:background-color .3s ease}.demo-account[_ngcontent-%COMP%]:hover{background-color:#e9ecef}\"]\n      });\n    }\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}